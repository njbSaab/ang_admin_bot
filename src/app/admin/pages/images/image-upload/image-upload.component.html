<div class="image-upload w-full">
  <div
    class="upload-drop-zone"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    [class.dragover]="isDragOver"
    (click)="triggerFileInput()"
  >
    <p *ngIf="!selectedFile">
      Перетащите сюда изображение или кликните для выбора
    </p>
    <img
      *ngIf="previewUrl"
      [src]="previewUrl"
      alt="Preview"
      class="preview-image"
    />
    <input
      type="file"
      accept=".jpeg, .jpg, .png, .svg, .webp, .gif"
      (change)="onFileSelected($event)"
      #fileInput
      hidden
    />
  </div>
  <button
    (click)="uploadFile()"
    [disabled]="!selectedFile"
    class="nj-toast-gradient btn w-full"
  >
    Загрузить
  </button>

  <div
    class="flex justify-center mt-[4px] cursor-pointer"
    routerLink="/admin/images-table"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      viewBox="0 0 24 24"
    >
      <g
        fill="none"
        stroke="#4E45E5"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
      >
        <path
          fill="#4E45E5"
          fill-opacity="0"
          stroke-dasharray="20"
          stroke-dashoffset="20"
          d="M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5"
        >
          <animate
            attributeName="d"
            begin="0.5s"
            dur="1.5s"
            repeatCount="indefinite"
            values="M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5;M12 4h2v3h2.5l-4.5 4.5M12 4h-2v3h-2.5l4.5 4.5;M12 4h2v6h2.5l-4.5 4.5M12 4h-2v6h-2.5l4.5 4.5"
          />
          <animate
            fill="freeze"
            attributeName="fill-opacity"
            begin="0.7s"
            dur="0.5s"
            values="0;1"
          />
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            dur="0.4s"
            values="20;0"
          />
        </path>
        <path stroke-dasharray="14" stroke-dashoffset="14" d="M6 19h12">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            begin="0.5s"
            dur="0.2s"
            values="14;0"
          />
        </path>
      </g>
    </svg>
  </div>

  <!-- Сообщения об успехе и ошибках -->
  <div
    *ngIf="successMessage"
    class="alert alert-success mb-4 relative flex justify-between"
  >
    <b> {{ successMessage }} </b>
    <span class="close" (click)="closeMessages()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="36"
        height="36"
        viewBox="0 0 24 24"
      >
        <path
          fill="currentColor"
          d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"
        />
      </svg>
    </span>
  </div>

  <div *ngIf="errorMessage" class="alert alert-error relative">
    {{ errorMessage }}
    <span class="close" (click)="closeMessages()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="36"
        height="36"
        viewBox="0 0 24 24"
      >
        <path
          fill="currentColor"
          d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"
        />
      </svg>
    </span>
  </div>
</div>
